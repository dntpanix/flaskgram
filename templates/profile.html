{% extends "base.html" %}
{% block content %}
<div class="profile-header">
    <div class="profile-avatar"></div>
    <div class="profile-info">
        <div class="profile-username">{{ user.username }}</div>
        <div class="profile-stats">
            <span class="stat"><span class="stat-value">{{ user.posts_count }}</span> публікацій</span>
            <span class="stat"><span class="stat-value">{{ user.followers }}</span> підписників</span>
            <span class="stat"><span class="stat-value">{{ user.following }}</span> підписок</span>
        </div>
        <div class="profile-bio">{{ user.bio }}</div>
        <button class="follow-btn" id="follow-btn">Підписатися</button>
    </div>
</div>

<div class="posts-grid">
    {% for post in posts %}
    <div class="grid-post" data-post-id="{{ post.id }}">
        <img src="{{ post.image_url }}" alt="Post">
    </div>
    {% endfor %}
</div>

<script>
document.getElementById('follow-btn').addEventListener('click', function() {
    fetch('/api/user/{{ user.username }}/follow', { method: 'POST' })
        .then(r => r.json())
        .then(data => {
            if (data.success) {
                this.textContent = 'Відписатися';
            }
        });
});
</script>
{% endblock %}